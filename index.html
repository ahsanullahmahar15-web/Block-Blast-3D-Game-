<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='gradCyan' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2338bdf8;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2306b6d4;stop-opacity:1' /%3E%3C/linearGradient%3E%3ClinearGradient id='gradPurple' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23c084fc;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23a855f7;stop-opacity:1' /%3E%3C/linearGradient%3E%3ClinearGradient id='gradOrange' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23fbbf24;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23f97316;stop-opacity:1' /%3E%3C/linearGradient%3E%3ClinearGradient id='gradGreen' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%234ade80;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2316a34a;stop-opacity:1' /%3E%3C/defs%3E%3Crect x='0' y='0' width='50' height='50' fill='url(%23gradCyan)' /%3E%3Crect x='50' y='0' width='50' height='50' fill='url(%23gradPurple)' /%3E%3Crect x='0' y='50' width='50' height='50' fill='url(%23gradOrange)' /%3E%3Crect x='50' y='50' width='50' height='50' fill='url(%23gradGreen)' /%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Block Blast X 3D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        overscroll-behavior: none;
        touch-action: none;
        transition: background-image 0.5s ease-in-out;
      }
      .bg-theme-holographic {
        background-image: radial-gradient(ellipse at center, #1e293b, #020617);
      }
      .bg-theme-wood {
        background-image: 
          radial-gradient(ellipse at center, rgba(60, 40, 20, 0.8), rgba(20, 10, 5, 1) 70%),
          url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Crect x='0' y='0' width='100' height='1'/%3E%3Crect x='0' y='0' width='1' height='100'/%3E%3C/g%3E%3C/svg%3E");
      }
      .bg-theme-futuristic {
        background-color: #0c0a09;
        background-image: 
          linear-gradient(rgba(16, 185, 129, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(16, 185, 129, 0.1) 1px, transparent 1px);
        background-size: 2rem 2rem;
      }
      @keyframes glow {
        0%, 100% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #0ea5e9, 0 0 20px #0ea5e9; }
        50% { text-shadow: 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #0ea5e9, 0 0 25px #0ea5e9; }
      }
      .text-glow {
        animation: glow 2.5s ease-in-out infinite;
      }
      @keyframes line-clear-explosive {
        0% { transform: scale(1); opacity: 1; filter: brightness(1); }
        50% { transform: scale(1.3); filter: brightness(3); }
        100% { transform: scale(0); opacity: 0; filter: brightness(1); }
      }
      .line-clear-explosive {
        animation: line-clear-explosive 0.3s ease-in-out forwards;
        z-index: 10;
      }
      @keyframes wood-shatter {
        0% { transform: scale(1) rotate(0); opacity: 1; box-shadow: inset 0px 2px 2px #a16207,0px 1px 1px #57534e; }
        40% { transform: scale(1.1) rotate(5deg); opacity: 1; box-shadow: inset 0px 2px 2px #a16207,0px 1px 1px #57534e, 0 0 10px #facc15; }
        100% { transform: scale(0) rotate(-90deg); opacity: 0; box-shadow: inset 0px 2px 2px #a16207,0px 1px 1px #57534e; }
      }
      .line-clear-wood {
          animation: wood-shatter 0.4s ease-out forwards;
          z-index: 10;
      }
      @keyframes futuristic-dissolve {
        0% { transform: scale(1); opacity: 1; filter: brightness(1.2); box-shadow: 0 0 5px currentColor; }
        50% { transform: scale(1.1); opacity: 1; filter: brightness(4); box-shadow: 0 0 15px currentColor, 0 0 25px #fff; }
        100% { transform: scale(0.3); opacity: 0; filter: brightness(1); box-shadow: 0 0 5px currentColor; }
      }
      .line-clear-futuristic {
          animation: futuristic-dissolve 0.4s ease-in-out forwards;
          z-index: 10;
      }
      @keyframes fade-in-down {
          from {
              opacity: 0;
              transform: translate3d(0, -30px, 0) scale(0.95);
          }
          to {
              opacity: 1;
              transform: translate3d(0, 0, 0) scale(1);
          }
      }
      .animate-fade-in-down {
          animation: fade-in-down 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
      }
       @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
      }
      .animate-fade-in {
          animation: fade-in 0.3s ease-in-out both;
      }
       @keyframes fade-out-up {
        from {
            opacity: 1;
            transform: translate3d(0, 0, 0) scale(1);
        }
        to {
            opacity: 0;
            transform: translate3d(0, -30px, 0) scale(0.95);
        }
      }
      .animate-fade-out-up {
          animation: fade-out-up 0.4s cubic-bezier(0.55, 0.085, 0.68, 0.53) both;
      }
      @keyframes block-place-pop {
        0% { transform: scale(0.7); opacity: 0.7; }
        80% { transform: scale(1.05); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }
      .animate-block-place-pop {
        animation: block-place-pop 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      @keyframes pulse-glow-smooth {
        0%, 100% {
          transform: translateY(-0.5rem) scale(1.1);
          box-shadow: 0 0 15px rgba(56, 189, 248, 0.6);
        }
        50% {
          transform: translateY(-0.5rem) scale(1.12);
          box-shadow: 0 0 22px rgba(56, 189, 248, 0.8);
        }
      }
      .animate-pulse-glow-smooth {
        animation: pulse-glow-smooth 1.8s ease-in-out infinite;
      }
      @keyframes hologram-flicker {
        0%, 100% {
          opacity: 1;
          box-shadow: 0 0 10px rgba(56, 189, 248, 0.4), inset 0 0 8px rgba(56, 189, 248, 0.2);
        }
        50% {
          opacity: 0.9;
          box-shadow: 0 0 12px rgba(56, 189, 248, 0.5), inset 0 0 10px rgba(56, 189, 248, 0.3);
        }
      }
      .hologram-panel {
        border: 1px solid rgba(56, 189, 248, 0.3);
        background: rgba(14, 165, 233, 0.1);
        animation: hologram-flicker 3s ease-in-out infinite;
      }
      .neon-energy-box {
        border: 2px solid rgba(56, 189, 248, 0.5);
        background: radial-gradient(ellipse at center, rgba(14, 165, 233, 0.2) 0%, rgba(14, 165, 233, 0.05) 70%);
        box-shadow: 0 0 15px rgba(56, 189, 248, 0.3), inset 0 0 8px rgba(56, 189, 248, 0.2);
        animation: hologram-flicker 3s ease-in-out infinite;
      }
      .hologram-ui {
        position: relative;
        border: 1px solid rgba(56, 189, 248, 0.3);
        background: radial-gradient(ellipse at center, rgba(14, 165, 233, 0.15) 0%, rgba(14, 165, 233, 0) 75%);
        animation: hologram-flicker 3s ease-in-out infinite;
        transition: all 0.2s ease;
      }
      .hologram-ui::before,
      .hologram-ui::after,
      .hologram-corners-alt::before,
      .hologram-corners-alt::after {
        content: '';
        position: absolute;
        width: 1rem;
        height: 1rem;
        border-color: #38bdf8;
        border-style: solid;
        opacity: 0.8;
      }
      .hologram-ui::before { top: -1px; left: -1px; border-width: 2px 0 0 2px; }
      .hologram-ui::after { bottom: -1px; right: -1px; border-width: 0 2px 2px 0; }
      .hologram-corners-alt::before { top: -1px; right: -1px; border-width: 2px 2px 0 0; }
      .hologram-corners-alt::after { bottom: -1px; left: -1px; border-width: 0 0 2px 2px; }
      
      @keyframes bomb-explosion {
        0% { transform: scale(0.5); background-color: rgba(255, 255, 0, 0.8); border-radius: 50%; }
        50% { background-color: rgba(255, 165, 0, 1); }
        100% { transform: scale(1.5); background-color: rgba(255, 0, 0, 0); border-radius: 25%; }
      }
      .animate-bomb-explosion {
        animation: bomb-explosion 0.4s ease-out forwards;
        z-index: 20;
      }
      @keyframes holographic-dissolve {
        0% {
            opacity: 1;
            transform: scale(1);
            filter: blur(0) brightness(1);
        }
        50% {
            opacity: 0.5;
            transform: scale(1.2);
            filter: blur(4px) brightness(2.5);
        }
        100% {
            opacity: 0;
            transform: scale(0.8);
            filter: blur(12px) brightness(4);
        }
      }
      .animate-holographic-dissolve {
        animation: holographic-dissolve 0.35s ease-out forwards;
        z-index: 20;
      }
      @keyframes reshuffle-in {
        from {
          opacity: 0;
          transform: scale(0.8);
          filter: blur(5px);
        }
        to {
          opacity: 1;
          transform: scale(1);
          filter: blur(0);
        }
      }
      .animate-reshuffle-in {
        animation: reshuffle-in 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
      }


      /* Settings Modal */
      .settings-backdrop {
        position: absolute;
        inset: 0;
        background-color: rgba(2, 6, 23, 0.8);
        backdrop-filter: blur(4px);
        z-index: 40;
      }
      .settings-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 50;
        width: 90%;
        max-width: 420px;
      }

      /* Custom Toggle Switch */
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }
      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #334155; /* slate-700 */
        transition: .4s;
        border-radius: 34px;
        border: 1px solid #475569;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
      }
      input:checked + .toggle-slider {
        background-color: #0ea5e9; /* sky-500 */
        box-shadow: 0 0 10px #0ea5e9;
      }
      input:checked + .toggle-slider:before {
        transform: translateX(26px);
      }

      /* Start Screen */
       @keyframes start-button-glow {
        0%, 100% {
          box-shadow: 0 0 20px #0ea5e9, 0 0 30px #0ea5e9, 0 0 40px #0ea5e9;
          transform: scale(1.0);
        }
        50% {
          box-shadow: 0 0 30px #0ea5e9, 0 0 45px #0ea5e9, 0 0 60px #0ea5e9;
          transform: scale(1.05);
        }
      }
      .start-button-glow {
        animation: start-button-glow 2.5s ease-in-out infinite;
      }

      @keyframes float-up {
        from {
          transform: translateY(100%) rotate(0);
          opacity: 0;
        }
        50% {
          opacity: 0.7;
        }
        to {
          transform: translateY(-100%) rotate(var(--rotation-end, 180deg));
          opacity: 0;
        }
      }
      .floating-block {
        position: absolute;
        bottom: -10%;
        border-radius: 8px;
        animation: float-up linear infinite;
      }
      
      .start-screen-overlay::before {
        content: '';
        position: absolute;
        top: -50%; left: -50%;
        width: 200%; height: 200%;
        background: radial-gradient(circle at center, rgba(168, 85, 247, 0.15) 0%, rgba(56, 189, 248, 0.1) 30%, transparent 60%);
        animation: rotate-lighting 45s linear infinite;
        pointer-events: none;
      }
      @keyframes rotate-lighting {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes sparkle {
        0%, 100% { opacity: 0; transform: scale(0.5); }
        50% { opacity: 1; transform: scale(1); }
      }
      .particle {
        position: absolute;
        bottom: -10%;
        border-radius: 50%;
        background-color: #ffffff;
        box-shadow: 0 0 8px #ffffff, 0 0 12px #ffffff;
        animation: sparkle ease-in-out infinite, float-up linear infinite;
      }
      
      /* Player Profile Animations */
      @keyframes avatar-glow {
        0%, 100% {
          box-shadow: 0 0 8px #38bdf8, 0 0 2px #fff, inset 0 0 5px #38bdf8;
          border-color: #38bdf8;
        }
        50% {
          box-shadow: 0 0 16px #38bdf8, 0 0 4px #fff, inset 0 0 8px #38bdf8;
          border-color: #7dd3fc;
        }
      }
      .animate-avatar-glow {
        animation: avatar-glow 2.5s ease-in-out infinite;
      }
      @keyframes subtle-float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-3px); }
      }
      .animate-subtle-float {
        animation: subtle-float 3s ease-in-out infinite;
        display: inline-block;
      }
      @keyframes text-glow-white {
        0%, 100% { text-shadow: 0 0 2px #fff, 0 0 4px #e0f2fe; }
        50% { text-shadow: 0 0 4px #fff, 0 0 8px #e0f2fe; }
      }
      .animate-text-glow-white {
        animation: text-glow-white 3s ease-in-out infinite;
      }

      /* Start Screen Demo */
      @keyframes demo-move-block-success {
        0% { transform: translate(0, 0) scale(1); opacity: 1; }
        20% { transform: translateY(-2.5rem) scale(1.1); opacity: 1; }
        80% { transform: translate(-2.5rem, -6.5rem) scale(1.1); opacity: 1; }
        100% { transform: translate(-2.5rem, -6.5rem) scale(1); opacity: 0; }
      }
      .animate-demo-move-block-success {
        animation: demo-move-block-success 2.0s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        animation-delay: 0.5s;
      }
      @keyframes demo-move-block-fail {
        0% { transform: translate(0, 0) scale(1); opacity: 1; }
        20% { transform: translateY(-2.5rem) scale(1.1); opacity: 1; }
        80% { transform: translate(1.5rem, -5rem) scale(1.1); opacity: 1; }
        100% { transform: translate(1.5rem, -5rem) scale(1); opacity: 0; }
      }
      .animate-demo-move-block-fail {
        animation: demo-move-block-fail 2.0s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        animation-delay: 0.5s;
      }

      @keyframes demo-cell-glow {
        0%, 100% { background-color: rgba(56, 189, 248, 0.1); box-shadow: none; }
        50% { background-color: var(--glow-color); box-shadow: 0 0 10px var(--glow-color); }
      }
      .animate-demo-cell-glow {
        animation: demo-cell-glow 1.0s ease-in-out;
        animation-delay: 2.1s; /* Timed with block arrival */
      }
      
      /* Drag and Drop */
      @keyframes trail-pulse {
        0%, 100% {
          filter: drop-shadow(0 0 6px var(--trail-color-faded, #fff)) drop-shadow(0 0 10px var(--trail-color-faded, #fff));
        }
        50% {
          filter: drop-shadow(0 0 10px var(--trail-color, #fff)) drop-shadow(0 0 16px var(--trail-color, #fff));
        }
      }
      .dragged-block-trail {
        animation: trail-pulse 1.5s ease-in-out infinite;
      }
      .cell-hint-bad {
        background-color: rgba(239, 68, 68, 0.4) !important;
        box-shadow: inset 0 0 8px rgba(239, 68, 68, 0.8);
      }
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake {
        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
      }
      
      /* Shatter Effect */
      @keyframes shatter-fragment {
        from {
            transform: translate(0, 0) scale(1) rotate(0);
            opacity: 1;
            border-radius: 0;
        }
        to {
            transform: var(--transform-end);
            opacity: 0;
            border-radius: 50%;
        }
      }
      .fragment {
          position: absolute;
          animation: shatter-fragment 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
          will-change: transform, opacity;
      }

      /* Game Over Modal */
      @keyframes new-high-score-glow {
        0% { transform: scale(0.8) translateY(10px); opacity: 0; filter: brightness(1); }
        60% { transform: scale(1.1) translateY(-5px); opacity: 1; filter: brightness(2); text-shadow: 0 0 15px #fde047, 0 0 25px #fde047; }
        100% { transform: scale(1) translateY(0); opacity: 1; filter: brightness(1.5); text-shadow: 0 0 10px #fde047, 0 0 20px #fde047; }
      }
      .animate-new-high-score {
        animation: new-high-score-glow 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        animation-delay: 0.2s;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>